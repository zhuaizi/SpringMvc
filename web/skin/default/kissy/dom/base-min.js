KISSY.add("dom/base/api",[],function(b){var f=b.Env.host||{},g=f.document,e=b.UA,d=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,a={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},c={isCustomDomain:function(j){j=j||f;j=c.get(j);var i=j.document.domain,h=j.location.hostname;return i!==h&&i!=="["+h+"]"},getEmptyIframeSrc:function(h){h=h||f;h=c.get(h);if(e.ie&&c.isCustomDomain(h)){return"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+h.document.domain+'";document.close();')+"}())"}return""},NodeType:a,getWindow:function(h){if(!h){return f}h=c.get(h);if(b.isWindow(h)){return h}var i=h;if(i.nodeType!==a.DOCUMENT_NODE){i=h.ownerDocument}return i.defaultView||i.parentWindow},getDocument:function(h){if(!h){return g}h=c.get(h);return b.isWindow(h)?h.document:h.nodeType===a.DOCUMENT_NODE?h:h.ownerDocument},isDomNodeList:function(h){return h&&!h.nodeType&&h.item&&!h.setTimeout},nodeName:function(i){var j=c.get(i),k=j.nodeName.toLowerCase();if(e.ie){var h=j.scopeName;if(h&&h!=="HTML"){k=h.toLowerCase()+":"+k}}return k},_RE_NUM_NO_PX:new RegExp("^("+d+")(?!px)[a-z%]+$","i")};b.mix(c,a);return c});KISSY.add("dom/base/attr",["./api"],function(g,j){var c=j("./api");var v=g.Env.host.document,i=c.NodeType,t=v&&v.documentElement,w="",a=c.nodeName,r=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,q=/^(?:button|input|object|select|textarea)$/i,o=/^a(?:rea)?$/i,l=/:|^on/,m=/\r/g,k={},h={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},u={tabindex:{get:function(x){var y=x.getAttributeNode("tabindex");return y&&y.specified?parseInt(y.value,10):q.test(x.nodeName)||o.test(x.nodeName)&&x.href?0:undefined}}},s={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},e={get:function(y,x){return c.prop(y,x)?x.toLowerCase():undefined},set:function(y,A,x){var z;if(A===false){c.removeAttr(y,x)}else{z=s[x]||x;if(z in y){y[z]=true}y.setAttribute(x,x.toLowerCase())}return x}},p={},d={},f={select:{get:function(D){var A=D.selectedIndex,z=D.options,y,C,x,B=String(D.type)==="select-one";if(A<0){return null}else{if(B){return c.val(z[A])}}y=[];C=0;x=z.length;for(;C<x;++C){if(z[C].selected){y.push(c.val(z[C]))}}return y},set:function(z,A){var x=g.makeArray(A),y=z.options;g.each(y,function(B){B.selected=g.inArray(c.val(B),x)});if(!x.length){z.selectedIndex=-1}return x}}};g.each(["radio","checkbox"],function(x){f[x]={get:function(y){return y.getAttribute("value")===null?"on":y.value},set:function(y,z){if(g.isArray(z)){y.checked=g.inArray(c.val(y),z);return 1}return undefined}}});u.style={get:function(x){return x.style.cssText}};function b(x){return x==null?"":x+""}function n(y,x){x=s[x]||x;var z=p[x];if(z&&z.get){return z.get(y,x)}else{return y[x]}}g.mix(c,{_valHooks:f,_propFix:s,_attrHooks:u,_propHooks:p,_attrNodeHook:d,_attrFix:k,prop:function(x,z,D){var y=c.query(x),A,B,C;if(g.isPlainObject(z)){g.each(z,function(F,E){c.prop(y,E,F)});return undefined}z=s[z]||z;C=p[z];if(D!==undefined){for(A=y.length-1;A>=0;A--){B=y[A];if(C&&C.set){C.set(B,D,z)}else{B[z]=D}}}else{if(y.length){return n(y[0],z)}}return undefined},hasProp:function(y,A){var z=c.query(y),B,x=z.length,C;for(B=0;B<x;B++){C=z[B];if(n(C,A)!==undefined){return true}}return false},removeProp:function(x,z){z=s[z]||z;var y=c.query(x),A,B;for(A=y.length-1;A>=0;A--){B=y[A];try{B[z]=undefined;delete B[z]}catch(C){}}},attr:function(A,x,z,H){var D=c.query(A),C,E,y=D[0],F;if(g.isPlainObject(x)){H=z;for(var B in x){c.attr(D,B,x[B],H)}return undefined}if(H&&h[x]){return c[x](A,z)}x=x.toLowerCase();if(H&&h[x]){return c[x](A,z)}x=k[x]||x;if(r.test(x)){C=e}else{if(l.test(x)){C=d}else{C=u[x]}}if(z===undefined){if(y&&y.nodeType===i.ELEMENT_NODE){if(a(y)==="form"){C=d}if(C&&C.get){return C.get(y,x)}F=y.getAttribute(x);if(F===""){var G=y.getAttributeNode(x);if(!G||!G.specified){return undefined}}return F===null?undefined:F}}else{for(E=D.length-1;E>=0;E--){y=D[E];if(y&&y.nodeType===i.ELEMENT_NODE){if(a(y)==="form"){C=d}if(C&&C.set){C.set(y,z,x)}else{y.setAttribute(x,w+z)}}}}return undefined},removeAttr:function(x,y){y=y.toLowerCase();y=k[y]||y;var A=c.query(x),C,B,z;for(z=A.length-1;z>=0;z--){B=A[z];if(B.nodeType===i.ELEMENT_NODE){B.removeAttribute(y);if(r.test(y)&&(C=s[y]||y) in B){B[C]=false}}}},hasAttr:t&&!t.hasAttribute?function(x,z){z=z.toLowerCase();var y=c.query(x),A,B,C;for(A=0;A<y.length;A++){B=y[A];C=B.getAttributeNode(z);if(C&&C.specified){return true}}return false}:function(y,A){var z=c.query(y),B,x=z.length;for(B=0;B<x;B++){if(z[B].hasAttribute(A)){return true}}return false},val:function(x,D){var C,y,B,A,z,E;if(D===undefined){B=c.get(x);if(B){C=f[a(B)]||f[B.type];if(C&&"get" in C&&(y=C.get(B,"value"))!==undefined){return y}y=B.value;return typeof y==="string"?y.replace(m,""):y==null?"":y}return undefined}A=c.query(x);for(z=A.length-1;z>=0;z--){B=A[z];if(B.nodeType!==1){return undefined}E=D;if(E==null){E=""}else{if(typeof E==="number"){E+=""}else{if(g.isArray(E)){E=g.map(E,b)}}}C=f[a(B)]||f[B.type];if(!C||!("set" in C)||C.set(B,E,"value")===undefined){B.value=E}}return undefined},text:function(x,C){var B,A,z,y;if(C===undefined){B=c.get(x);return c._getText(B)}else{A=c.query(x);for(z=A.length-1;z>=0;z--){B=A[z];y=B.nodeType;if(y===i.ELEMENT_NODE){c.cleanData(B.getElementsByTagName("*"));if("textContent" in B){B.textContent=C}else{B.innerText=C}}else{if(y===i.TEXT_NODE||y===i.CDATA_SECTION_NODE){B.nodeValue=C}}}}return undefined},_getText:function(x){return x.textContent}});return c});KISSY.add("dom/base/class",["./api"],function(e,c){var f=c("./api");var h=[].slice,a=f.NodeType,b=/[\.\s]\s*\.?/;function i(p){p=e.trim(p||"");var j=p.split(b),o=[],m,k=j.length,n=0;for(;n<k;n++){if(m=j[n]){o.push(m)}}return o}function g(j){return function(p,r){var n,m,o,q=p.classList,k=h.call(arguments,2);for(n=0,m=r.length;n<m;n++){if(o=r[n]){q[j].apply(q,[o].concat(k))}}}}function d(j){return function(k,m){var n=i(m),l=h.call(arguments,2);f.query(k).each(function(o){if(o.nodeType===a.ELEMENT_NODE){f[j].apply(f,[o,n].concat(l))}})}}e.mix(f,{_hasClass:function(n,p){var k,j,m,o=n.classList;if(o.length){for(k=0,j=p.length;k<j;k++){m=p[k];if(m&&!o.contains(m)){return false}}return true}return false},_addClass:g("add"),_removeClass:g("remove"),_toggleClass:g("toggle"),hasClass:function(j,l){var k=false;l=i(l);f.query(j).each(function(m){if(m.nodeType===a.ELEMENT_NODE&&f._hasClass(m,l)){k=true;return false}return undefined});return k},replaceClass:function(j,l,k){f.removeClass(j,l);f.addClass(j,k)},addClass:d("_addClass"),removeClass:d("_removeClass"),toggleClass:d("_toggleClass")});return f});KISSY.add("dom/base/create",["./api"],function(i,t){var d=t("./api");var G=i.getLogger("s/dom");var H=i.Env.host.document,k=d.NodeType,w=i.UA,x=w.ieMode,z="div",s="parentNode",f=H&&H.createElement(z),A=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,B=/<([\w:]+)/,C=/^\s+/,D=/\s+$/,l=!!(x&&x<9),a=l,n=/<|&#?\w+;/,r=H&&"outerHTML" in H.documentElement,j=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;function E(I,p){return I.getElementsByTagName(p)}function c(p){var I=p&&p!==H?p.createElement(z):f;if(I===f){I.innerHTML=""}return I}function b(I,p){var J=c(p);J.innerHTML="m<div>"+I+"</div>";return J.lastChild}function F(p){try{p.innerHTML="";return}catch(I){}for(var J;J=p.lastChild;){q(J,p)}}function q(I,p){if(p){if(l&&p.canHaveChildren&&"removeNode" in I){if(I.firstChild){F(I)}I.removeNode(false)}else{p.removeChild(I)}}}i.mix(d,{create:function(L,P,O,T){var N=null;if(!L){return N}if(L.nodeType){return d.clone(L)}if(typeof L!=="string"){return N}if(T===undefined){T=true}if(T){L=i.trim(L)}var Q=d._creators,R,M,I=O||H,J,S=z,K,p;if(!n.test(L)){N=I.createTextNode(L)}else{if(J=j.exec(L)){N=I.createElement(J[1])}else{L=L.replace(A,"<$1></$2>");if((J=B.exec(L))&&(K=J[1])){S=K.toLowerCase()}R=(Q[S]||b)(L,I);if(a&&(M=L.match(C))){R.insertBefore(I.createTextNode(M[0]),R.firstChild)}if(a&&/\S/.test(L)&&(M=L.match(D))){R.appendChild(I.createTextNode(M[0]))}p=R.childNodes;if(p.length===1){N=p[0][s].removeChild(p[0])}else{if(p.length){N=m(p)}else{i.error(L+" : create node error")}}}}return h(N,P)},_fixCloneAttributes:function(I,p){if(d.nodeName(I)==="textarea"){p.defaultValue=I.defaultValue;p.value=I.value}},_creators:{div:b},_defaultCreator:b,html:function(K,Q,M){var L=d.query(K),I=L[0],R=false,p,N,J;if(!I){return null}if(Q===undefined){if(I.nodeType===k.ELEMENT_NODE){return I.innerHTML}else{if(I.nodeType===k.DOCUMENT_FRAGMENT_NODE){var P=c(I.ownerDocument);P.appendChild(I);return P.innerHTML}else{return null}}}else{Q+="";if(!Q.match(/<(?:script|style|link)/i)&&(!a||!Q.match(C))&&!e[(Q.match(B)||["",""])[1].toLowerCase()]){try{for(N=L.length-1;N>=0;N--){J=L[N];if(J.nodeType===k.ELEMENT_NODE){d.cleanData(E(J,"*"));J.innerHTML=Q}}R=true}catch(O){}}if(!R){p=d.create(Q,0,I.ownerDocument,0);d.empty(L);d.append(p,L,M)}}return undefined},outerHtml:function(K,O,M){var L=d.query(K),P,N,p,J=L.length,I=L[0];if(!I){return null}if(O===undefined){if(r&&I.nodeType!==d.DOCUMENT_FRAGMENT_NODE){return I.outerHTML}else{P=c(I.ownerDocument);P.appendChild(d.clone(I,true));return P.innerHTML}}else{O+="";if(!O.match(/<(?:script|style|link)/i)&&r){for(N=J-1;N>=0;N--){I=L[N];if(I.nodeType===k.ELEMENT_NODE){d.cleanData(I,1);I.outerHTML=O}}}else{p=d.create(O,0,I.ownerDocument,0);d.insertBefore(p,L,M);d.remove(L)}}return undefined},remove:function(p,N){var M,K=d.query(p),L,I=i.Env.mods["event/dom/base"],J;I=I&&I.exports;for(J=K.length-1;J>=0;J--){M=K[J];if(!N&&M.nodeType===k.ELEMENT_NODE){L=i.makeArray(E(M,"*"));L.push(M);d.removeData(L);if(I&&I.detach){I.detach(L)}}q(M,M.parentNode)}},clone:function(I,J,p,L){if(typeof J==="object"){L=J.deepWithDataAndEvent;p=J.withDataAndEvent;J=J.deep}var M=d.get(I),O,N=d._fixCloneAttributes,K;if(!M){return null}K=M.nodeType;O=M.cloneNode(J);if(K===k.ELEMENT_NODE||K===k.DOCUMENT_FRAGMENT_NODE){if(N&&K===k.ELEMENT_NODE){N(M,O)}if(J&&N){v(N,M,O)}}if(p){g(M,O);if(J&&L){v(g,M,O)}}return O},empty:function(p){var J=d.query(p),K,I;for(I=J.length-1;I>=0;I--){K=J[I];d.remove(K.childNodes)}},_nodeListToFragment:m});d.outerHTML=d.outerHtml;function v(O,J,M){var Q=J.nodeType;if(Q===k.DOCUMENT_FRAGMENT_NODE){var K=J.childNodes,I=M.childNodes,L=0;while(K[L]){if(I[L]){v(O,K[L],I[L])}L++}}else{if(Q===k.ELEMENT_NODE){var P=E(J,"*"),p=E(M,"*"),N=0;while(P[N]){if(p[N]){O(P[N],p[N])}N++}}}}function g(L,I){var p=i.Env.mods["event/dom/base"],K,J;p=p&&p.exports;if(I.nodeType===k.ELEMENT_NODE&&!d.hasData(L)){return}K=d.data(L);for(J in K){d.data(I,J,K[J])}if(p&&p.clone){p.clone(L,I)}}function h(I,p){if(i.isPlainObject(p)){if(I.nodeType===k.ELEMENT_NODE){d.attr(I,p,true)}else{if(I.nodeType===k.DOCUMENT_FRAGMENT_NODE){d.attr(I.childNodes,p,true)}}}return I}function m(I){var K=null,L,J,p;if(I&&(I.push||I.item)&&I[0]){J=I[0].ownerDocument;K=J.createDocumentFragment();I=i.makeArray(I);for(L=0,p=I.length;L<p;L++){K.appendChild(I[L])}}else{G.error("Unable to convert "+I+" to fragment.")}return K}var o=d._creators,u=d.create,e={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},y;for(y in e){(function(p){o[y]=function(J,I){return u("<"+p+">"+J+"</"+p+">",undefined,I)}})(e[y])}o.option=o.optgroup=function(I,p){return u('<select multiple="multiple">'+I+"</select>",undefined,p)};e.option=e.optgroup=1;return d});KISSY.add("dom/base/data",["./api"],function(f,a){var h=a("./api");var i=f.Env.host,d="_ks_data_"+f.now(),b={},g={},k={applet:1,object:1,embed:1};var e={hasData:function(l,m){if(l){if(m!==undefined){if(m in l){return true}}else{if(!f.isEmptyObject(l)){return true}}}return false}};var c={hasData:function(l,m){if(l==i){return c.hasData(g,m)}var n=l[d];return e.hasData(n,m)},data:function(m,n,o){if(m==i){return c.data(g,n,o)}var l=m[d];if(o!==undefined){l=m[d]=m[d]||{};l[n]=o}else{if(n!==undefined){return l&&l[n]}else{l=m[d]=m[d]||{};return l}}},removeData:function(m,n){if(m==i){return c.removeData(g,n)}var l=m[d];if(n!==undefined){delete l[n];if(f.isEmptyObject(l)){c.removeData(m)}}else{try{delete m[d]}catch(o){m[d]=undefined}}}};var j={hasData:function(n,l){var m=n[d];if(!m){return false}var o=b[m];return e.hasData(o,l)},data:function(o,m,p){if(k[o.nodeName.toLowerCase()]){return undefined}var n=o[d],l;if(!n){if(m!==undefined&&p===undefined){return undefined}n=o[d]=f.guid()}l=b[n];if(p!==undefined){l=b[n]=b[n]||{};l[m]=p}else{if(m!==undefined){return l&&l[m]}else{l=b[n]=b[n]||{};return l}}},removeData:function(o,m){var n=o[d],l;if(!n){return}l=b[n];if(m!==undefined){delete l[m];if(f.isEmptyObject(l)){j.removeData(o)}}else{delete b[n];try{delete o[d]}catch(p){o[d]=undefined}if(o.removeAttribute){o.removeAttribute(d)}}}};f.mix(h,{__EXPANDO:d,hasData:function(l,o){var n=false,m=h.query(l);for(var p=0;p<m.length;p++){var q=m[p];if(q.nodeType){n=j.hasData(q,o)}else{n=c.hasData(q,o)}if(n){return n}}return n},data:function(l,o,r){var n=h.query(l),q=n[0];if(f.isPlainObject(o)){for(var m in o){h.data(n,m,o[m])}return undefined}if(r===undefined){if(q){if(q.nodeType){return j.data(q,o)}else{return c.data(q,o)}}}else{for(var p=n.length-1;p>=0;p--){q=n[p];if(q.nodeType){j.data(q,o,r)}else{c.data(q,o,r)}}}return undefined},removeData:function(l,m){var o=h.query(l),p,n;for(n=o.length-1;n>=0;n--){p=o[n];if(p.nodeType){j.removeData(p,m)}else{c.removeData(p,m)}}},cleanData:function(n,s){var o=h.query(n),l,q;var t=f.Env.mods["event/dom/base"];t=t&&t.exports;for(q=o.length-1;q>=0;q--){l=o[q];if(l.nodeType){var m=s&&f.makeArray(l.getElementsByTagName("*"))||[];m.push(l);for(var p=0,r=m.length;p<r;p++){j.removeData(m[p])}if(t&&t.detach){t.detach(m)}}else{c.removeData(l)}}}});return h});KISSY.add("dom/base/insertion",["./api"],function(h,f){var i=f("./api");var m="parentNode",c=i.NodeType,l=/^(?:button|input|object|select|textarea)$/i,e=i.nodeName,b=h.makeArray,g=[].splice,o="nextSibling",a=/\/(java|ecma)script/i;function n(p){return !p.type||a.test(p.type)}function k(p,r){var w=[],u,q,x;for(u=0;p[u];u++){q=p[u];x=e(q);if(q.nodeType===c.DOCUMENT_FRAGMENT_NODE){w.push.apply(w,k(b(q.childNodes),r))}else{if(x==="script"&&n(q)){if(q.parentNode){q.parentNode.removeChild(q)}if(r){r.push(q)}}else{if(q.nodeType===c.ELEMENT_NODE&&!l.test(x)){var v=[],z,t,y=q.getElementsByTagName("script");for(t=0;t<y.length;t++){z=y[t];if(n(z)){v.push(z)}}g.apply(p,[u+1,0].concat(v))}w.push(q)}}}return w}function j(q){if(q.src){var p="t="+h.tag;if(h.UA.ie){h.getScript(q.src)}else{h.getScript(q.src+(q.src.indexOf("?")>0?"&"+p:"?"+p))}}else{var r=h.trim(q.text||q.textContent||q.innerHTML||"");if(r){h.globalEval(r)}}}function d(s,u,x,r){s=i.query(s);if(r){r=[]}s=k(s,r);if(i._fixInsertionChecked){i._fixInsertionChecked(s)}u=i.query(u);var t=s.length,y,v,w,q,z,p=u.length;if(!t&&(!r||!r.length)||!p){return}y=i._nodeListToFragment(s);if(p>1){z=i.clone(y,true);u=h.makeArray(u)}for(v=0;v<p;v++){w=u[v];if(y){q=v>0?i.clone(z,true):y;x(q,w)}if(r&&r.length){h.each(r,j)}}}h.mix(i,{_fixInsertionChecked:null,insertBefore:function(q,r,p){d(q,r,function(t,s){if(s[m]){s[m].insertBefore(t,s)}},p)},insertAfter:function(q,r,p){d(q,r,function(t,s){if(s[m]){s[m].insertBefore(t,s[o])}},p)},appendTo:function(r,q,p){d(r,q,function(s,t){t.appendChild(s)},p)},prependTo:function(r,q,p){d(r,q,function(s,t){t.insertBefore(s,t.firstChild)},p)},wrapAll:function(p,q){q=i.clone(i.get(q),true);p=i.query(p);if(p[0].parentNode){i.insertBefore(q,p[0])}var r;while((r=q.firstChild)&&r.nodeType===1){q=r}i.appendTo(p,q)},wrap:function(p,q){p=i.query(p);q=i.get(q);h.each(p,function(r){i.wrapAll(r,q)})},wrapInner:function(p,q){p=i.query(p);q=i.get(q);h.each(p,function(r){var s=r.childNodes;if(s.length){i.wrapAll(s,q)}else{r.appendChild(q)}})},unwrap:function(p){p=i.query(p);h.each(p,function(q){var r=q.parentNode;i.replaceWith(r,r.childNodes)})},replaceWith:function(p,r){var q=i.query(p);r=i.query(r);i.remove(r,true);i.insertBefore(r,q);i.remove(q)}});h.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(q,p){i[p]=i[q]});return i});KISSY.add("dom/base/offset",["./api"],function(d,k){var a=k("./api");var c=d.Env.host,p=d.UA,B=c.document,g=a.NodeType,w=B&&B.documentElement,i=a.getWindow,l="CSS1Compat",h="compatMode",v=Math.max,q="position",A="relative",f="document",u="body",r="documentElement",m="viewport",o="scroll",e="client",n="left",s="top",y=o+"Left",x=o+"Top";d.mix(a,{offset:function(C,I,H){var G;if(I===undefined){G=a.get(C);var D;if(G){D=b(G,H)}return D}var F=a.query(C),E;for(E=F.length-1;E>=0;E--){G=F[E];z(G,I)}return undefined},scrollIntoView:function(Q,O,E,R){var T,F;if(!(T=a.get(Q))){return}if(O){O=a.get(O)}if(!O){O=T.ownerDocument}if(O.nodeType===g.DOCUMENT_NODE){O=i(O)}if(d.isPlainObject(E)){R=E.allowHorizontalScroll;F=E.onlyScrollIfNeeded;E=E.alignWithTop}R=R===undefined?true:R;var M=d.isWindow(O),L=a.offset(T),H=a.outerHeight(T),S=a.outerWidth(T),J,N,G,C,U,D,I,P,V,K;if(M){I=O;K=a.height(I);V=a.width(I);P={left:a.scrollLeft(I),top:a.scrollTop(I)};U={left:L[n]-P[n],top:L[s]-P[s]};D={left:L[n]+S-(P[n]+V),top:L[s]+H-(P[s]+K)};C=P}else{J=a.offset(O);N=O.clientHeight;G=O.clientWidth;C={left:a.scrollLeft(O),top:a.scrollTop(O)};U={left:L[n]-(J[n]+(parseFloat(a.css(O,"borderLeftWidth"))||0)),top:L[s]-(J[s]+(parseFloat(a.css(O,"borderTopWidth"))||0))};D={left:L[n]+S-(J[n]+G+(parseFloat(a.css(O,"borderRightWidth"))||0)),top:L[s]+H-(J[s]+N+(parseFloat(a.css(O,"borderBottomWidth"))||0))}}if(F){if(U.top<0||D.top>0){if(E===true){a.scrollTop(O,C.top+U.top)}else{if(E===false){a.scrollTop(O,C.top+D.top)}else{if(U.top<0){a.scrollTop(O,C.top+U.top)}else{a.scrollTop(O,C.top+D.top)}}}}}else{E=E===undefined?true:!!E;if(E){a.scrollTop(O,C.top+U.top)}else{a.scrollTop(O,C.top+D.top)}}if(R){if(F){if(U.left<0||D.left>0){if(E===true){a.scrollLeft(O,C.left+U.left)}else{if(E===false){a.scrollLeft(O,C.left+D.left)}else{if(U.left<0){a.scrollLeft(O,C.left+U.left)}else{a.scrollLeft(O,C.left+D.left)}}}}}else{E=E===undefined?true:!!E;if(E){a.scrollLeft(O,C.left+U.left)}else{a.scrollLeft(O,C.left+D.left)}}}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});d.each(["Left","Top"],function(C,D){var E=o+C;a[E]=function(I,G){if(typeof I==="number"){return arguments.callee(c,I)}I=a.get(I);var H,K,J,F,L;if(I&&I.nodeType===g.ELEMENT_NODE){if(G!==undefined){I[E]=parseFloat(G)}else{H=I[E]}}else{F=i(I);if(G!==undefined){G=parseFloat(G);K=C==="Left"?G:a.scrollLeft(F);J=C==="Top"?G:a.scrollTop(F);F.scrollTo(K,J)}else{H=F["page"+(D?"Y":"X")+"Offset"];if(typeof H!=="number"){L=F[f];H=L[r][E];if(typeof H!=="number"){H=L[u][E]}}}}return H}});d.each(["Width","Height"],function(C){a["doc"+C]=function(D){D=a.get(D);var E=a.getDocument(D);return v(E[r][o+C],E[u][o+C],a[m+C](E))};a[m+C]=function(G){G=a.get(G);var J=i(G);var F=J["inner"+C];if(p.mobile&&F){return F}var K=e+C,I=J[f],D=I[u],H=I[r],E=H[K];return I[h]===l&&E||D&&D[K]||E}});function t(F){var E,D,H,G=F.ownerDocument,C=G.body;if(!F.getBoundingClientRect){return{left:0,top:0}}E=F.getBoundingClientRect();D=E[n];H=E[s];D-=w.clientLeft||C.clientLeft||0;H-=w.clientTop||C.clientTop||0;return{left:D,top:H}}function j(D){var E=t(D),C=i(D);E.left+=a[y](C);E.top+=a[x](C);return E}function b(E,G){var C={left:0,top:0},D=i(E),H,F=E;G=G||D;do{H=D==G?j(F):t(F);C.left+=H.left;C.top+=H.top}while(D&&D!=G&&(F=D.frameElement)&&(D=D.parent));return C}function z(F,H){if(a.css(F,q)==="static"){F.style[q]=A}var C=b(F),D={},G,E;for(E in H){G=parseFloat(a.css(F,E))||0;D[E]=G+H[E]-C[E]}a.css(F,D)}return a});KISSY.add("dom/base/style",["./api","ua"],function(i,e){var v=/-([a-z])/ig;function A(){return arguments[1].toUpperCase()}function q(S){return S.replace(v,A)}function f(aa){if(aa.indexOf("-")!==-1){aa=aa.replace(v,A)}if(aa in n){return n[aa]}if(!Z||aa in Z){n[aa]={propertyName:aa,propertyNamePrefix:""}}else{var ad=aa.charAt(0).toUpperCase()+aa.slice(1),ac;for(var ab=0;ab<c;ab++){var S=x[ab];ac=S+ad;if(ac in Z){n[aa]={propertyName:ac,propertyNamePrefix:S}}}n[aa]=n[aa]||null}return n[aa]}var m=i;var B=i.getLogger("s/dom");var Q=e("./api");var D=i.Env.host,n={},x=["Webkit","Moz","O","ms"],c=x.length,k=D.document||{},p=k&&k.documentElement,Z=p.style,E=e("ua"),V=["margin","border","padding"],y=-1,b=2,w=1,R=0,W=Q.nodeName,s=/^margin/,h="width",I="height",a="display",N=a+m.now(),O="none",Y={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},g="",t="px",d=/\d(?!px)[a-z%]+$/i,o={},L={},U={},j=f("userSelect"),G=j&&j.propertyName;L["float"]="cssFloat";function X(S){if(L[S]){return L[S]}var aa=f(S);return aa&&aa.propertyName||S}function P(aa){var S,ac=U[aa],ab;if(!U[aa]){S=k.body||k.documentElement;ab=k.createElement(aa);Q.prepend(ab,S);ac=Q.css(ab,"display");S.removeChild(ab);U[aa]=ac}return ac}m.mix(Q,{_cssHooks:o,_cssProps:L,_getComputedStyle:function(ae,ab,ag){var ad="",ac,S,ah,aa,af=ae.ownerDocument;ab=X(ab);if(ag=ag||af.defaultView.getComputedStyle(ae,null)){ad=ag.getPropertyValue(ab)||ag[ab]}if(ad===""&&!Q.contains(af,ae)){ad=ae.style[ab]}if(Q._RE_NUM_NO_PX.test(ad)&&s.test(ab)){aa=ae.style;ac=aa.width;S=aa.minWidth;ah=aa.maxWidth;aa.minWidth=aa.maxWidth=aa.width=ad;ad=ag.width;aa.width=ac;aa.minWidth=S;aa.maxWidth=ah}return ad},style:function(S,ac,ag){var ae=Q.query(S),aa,ab,af=ae[0],ad;if(m.isPlainObject(ac)){for(aa in ac){for(ad=ae.length-1;ad>=0;ad--){T(ae[ad],aa,ac[aa])}}return undefined}if(ag===undefined){ab="";if(af){ab=T(af,ac,ag)}return ab}else{for(ad=ae.length-1;ad>=0;ad--){T(ae[ad],ac,ag)}}return undefined},css:function(ac,S,aa){var ae=Q.query(ac),ab=ae[0],ad,ah,ag,af;if(m.isPlainObject(S)){for(ad in S){for(af=ae.length-1;af>=0;af--){T(ae[af],ad,S[ad])}}return undefined}S=q(S);ah=o[S];if(aa===undefined){ag="";if(ab){if(!(ah&&"get" in ah&&(ag=ah.get(ab,true))!==undefined)){ag=Q._getComputedStyle(ab,S)}}return typeof ag==="undefined"?"":ag}else{for(af=ae.length-1;af>=0;af--){T(ae[af],S,aa)}}return undefined},show:function(S){var ad=Q.query(S),ac,aa,ae,ab;for(ab=ad.length-1;ab>=0;ab--){ae=ad[ab];ae.style[a]=Q.data(ae,N)||g;if(Q.css(ae,a)===O){ac=ae.tagName.toLowerCase();aa=P(ac);Q.data(ae,N,aa);ae.style[a]=aa}}},hide:function(S){var ac=Q.query(S),ae,ab;for(ab=ac.length-1;ab>=0;ab--){ae=ac[ab];var ad=ae.style,aa=ad[a];if(aa!==O){if(aa){Q.data(ae,N,aa)}ad[a]=O}}},toggle:function(S){var ab=Q.query(S),ac,aa;for(aa=ab.length-1;aa>=0;aa--){ac=ab[aa];if(Q.css(ac,a)===O){Q.show(ac)}else{Q.hide(ac)}}},addStyleSheet:function(aa,S,ad){if(typeof aa==="string"){ad=S;S=aa;aa=D}var ac=Q.getDocument(aa),ab;if(ad&&(ad=ad.replace("#",g))){ab=Q.get("#"+ad,ac)}if(ab){return}ab=Q.create("<style>",{id:ad},ac);Q.get("head",ac).appendChild(ab);if(ab.styleSheet){ab.styleSheet.cssText=S}else{ab.appendChild(ac.createTextNode(S))}},unselectable:!G?function(ab){var ag=Q.query(ab),aa,ad,af,ae=0,ah,S,ac;for(ad=ag.length-1;ad>=0;ad--){aa=ag[ad];S=aa.style;ac=aa.getElementsByTagName("*");aa.setAttribute("unselectable","on");ah=["iframe","textarea","input","select"];while(af=ac[ae++]){if(!m.inArray(W(af),ah)){af.setAttribute("unselectable","on")}}}}:function(S){var ab=Q.query(S);for(var aa=ab.length-1;aa>=0;aa--){ab[aa].style[G]="none"}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});m.each([h,I],function(S){Q["inner"+m.ucfirst(S)]=function(ab){var ac=Q.get(ab);return ac&&C(ac,S,b)};Q["outer"+m.ucfirst(S)]=function(ab,ac){var ad=Q.get(ab);return ad&&C(ad,S,ac?R:w)};var aa=S===h?["Left","Right"]:["Top","Bottom"];Q[S]=function(ab,ae){var ad=Q.get(ab);if(ae!==undefined){if(ad){var ac=u(ad);var af=z(ad,ac);if(af){ae+=r(ad,["padding","border"],aa,ac)}return Q.css(ad,S,ae)}return undefined}return ad&&C(ad,S,y)};o[S]={get:function(ac,ab){var ad;if(ab){ad=C(ac,S)+"px"}return ad}}});var K={position:"absolute",visibility:"hidden",display:"block"};m.each(["left","top"],function(S){o[S]={get:function(ac,ad){var ae,ab,aa;if(ad){aa=Q.css(ac,"position");if(aa==="static"){return"auto"}ae=Q._getComputedStyle(ac,S);ab=ae==="auto";if(ab&&aa==="relative"){return"0px"}if(ab||d.test(ae)){ae=H(ac)[S]+"px"}}return ae}}});function F(ad,ab,ae){var S={},ac=ad.style,aa;for(aa in ab){S[aa]=ac[aa];ac[aa]=ab[aa]}ae.call(ad);for(aa in ab){ac[aa]=S[aa]}}function T(ac,aa,af){var ab,S,ad;if(ac.nodeType===3||ac.nodeType===8||!(ab=ac.style)){return undefined}aa=q(aa);ad=o[aa];aa=X(aa);if(af!==undefined){if(af===null||af===g){af=g}else{if(!isNaN(Number(af))&&!Y[aa]){af+=t}}if(ad&&ad.set){af=ad.set(ac,af)}if(af!==undefined){try{ab[aa]=af}catch(ae){B.warn("css set error:"+ae)}if(af===g&&ab.removeAttribute){ab.removeAttribute(aa)}}if(!ab.cssText){if(E.webkit){ab=ac.outerHTML}ac.removeAttribute("style")}return undefined}else{if(!(ad&&"get" in ad&&(S=ad.get(ac,false))!==undefined)){S=ab[aa]}return S===undefined?"":S}}function C(aa){var ab,S=arguments;if(aa.offsetWidth!==0){ab=M.apply(undefined,S)}else{F(aa,K,function(){ab=M.apply(undefined,S)})}return ab}function r(aa,af,ab,ag){var ah=0,S,ac,ae;for(ac=0;ac<af.length;ac++){S=af[ac];if(S){for(ae=0;ae<ab.length;ae++){var ad;if(S==="border"){ad=S+ab[ae]+"Width"}else{ad=S+ab[ae]}ah+=parseFloat(Q._getComputedStyle(aa,ad,ag))||0}}}return ah}function z(aa,S){return Q._getComputedStyle(aa,"boxSizing",S)==="border-box"}function u(aa){var ab=aa.ownerDocument,S;if(ab.defaultView){S=ab.defaultView.getComputedStyle(aa,null)}return S}function M(ad,aa,ae){if(m.isWindow(ad)){return aa===h?Q.viewportWidth(ad):Q.viewportHeight(ad)}else{if(ad.nodeType===9){return aa===h?Q.docWidth(ad):Q.docHeight(ad)}}var af=aa===h?["Left","Right"]:["Top","Bottom"],S=aa===h?ad.offsetWidth:ad.offsetHeight;var ag=u(ad);var ai=z(ad,ag);var ah=0;if(S==null||S<=0){S=undefined;ah=Q._getComputedStyle(ad,aa,ag);if(ah==null||Number(ah)<0){ah=ad.style[aa]||0}ah=parseFloat(ah)||0}if(ae===undefined){ae=ai?w:y}var ab=S!==undefined||ai;var ac=S||ah;if(ae===y){if(ab){return ac-r(ad,["border","padding"],af,ag)}else{return ah}}else{if(ab){return ac+(ae===w?0:ae===b?-r(ad,["border"],af,ag):r(ad,["margin"],af,ag))}else{return ah+r(ad,V.slice(ae),af,ag)}}}var J=/^(?:body|html)$/i;function H(aa){var ab,ac,S={top:0,left:0};if(Q.css(aa,"position")==="fixed"){ac=aa.getBoundingClientRect()}else{ab=l(aa);ac=Q.offset(aa);S=Q.offset(ab);S.top+=parseFloat(Q.css(ab,"borderTopWidth"))||0;S.left+=parseFloat(Q.css(ab,"borderLeftWidth"))||0}ac.top-=parseFloat(Q.css(aa,"marginTop"))||0;ac.left-=parseFloat(Q.css(aa,"marginLeft"))||0;return{top:ac.top-S.top,left:ac.left-S.left}}function l(S){var aa=S.offsetParent||(S.ownerDocument||k).body;while(aa&&!J.test(aa.nodeName)&&Q.css(aa,"position")==="static"){aa=aa.offsetParent}return aa}return Q});KISSY.add("dom/base/selector",["./api"],function(g,m){var b=m("./api");var B=g.Env.host.document,A=B.documentElement,a=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector,s="getElementsByClassName" in B,q=g.isArray,n=g.makeArray,r=b.isDomNodeList,p=" ",j=Array.prototype.push,C=/^\.([\w-]+)$/,t=/^#([\w-]+)$/,l=/^([\w-])+$/,z=/^([\w-]+)#([\w-]+)$/,u=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,x=g.trim;function i(G){var E=this,D=E.length,F;for(F=0;F<D;F++){if(G(E[F],F)===false){break}}}function w(D){var E=D.substr(1);if(!E){throw new Error("An invalid or illegal string was specified for selector.")}return E}function o(D){var E=D.charAt(0);if(E==="#"){return c(w(D))}else{if(E==="."){return k(w(D))}else{return v(D)}}}function c(D){return function(F){var E=b._getElementById(D,B);return E&&b._contains(F,E)?[E]:[]}}function k(D){return function(E){return E.getElementsByClassName(D)}}function v(D){return function(E){return E.getElementsByTagName(D)}}function y(D){var E=/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/;return !D.match(E)}function h(N,F){var W,P,E,O,M=typeof N==="string",H=F!==undefined?h(F):(O=1)&&[B],T=H.length;if(!N){W=[]}else{if(M){N=x(N);if(O){if(N==="body"){W=[B.body]}else{if(C.test(N)&&s){W=n(B.getElementsByClassName(RegExp.$1))}else{if(z.test(N)){E=b._getElementById(RegExp.$2,B);W=E&&E.nodeName.toLowerCase()===RegExp.$1?[E]:[]}else{if(t.test(N)){E=b._getElementById(N.substr(1),B);W=E?[E]:[]}else{if(l.test(N)){W=n(B.getElementsByTagName(N))}else{if(y(N)&&s){var J=N.split(/\s+/),U,S=H,G,K;for(P=0,U=J.length;P<U;P++){J[P]=o(J[P])}for(P=0,U=J.length;P<U;P++){var L=J[P],V=[],D;for(G=0,K=S.length;G<K;G++){D=L(S[G]);V.push.apply(V,n(D))}S=V;if(!S.length){break}}W=S&&S.length>1?b.unique(S):S}}}}}}}if(!W){W=[];for(P=0;P<T;P++){j.apply(W,b._selectInternal(N,H[P]))}if(W.length>1&&T>1){b.unique(W)}}}else{if(N.nodeType||g.isWindow(N)){W=[N]}else{if(N.getDOMNodes){W=N.getDOMNodes()}else{if(q(N)){W=N}else{if(r(N)){W=n(N)}else{W=[N]}}}}if(!O){var R=W,I,Q=R.length;W=[];for(P=0;P<Q;P++){for(I=0;I<T;I++){if(b._contains(H[I],R[P])){W.push(R[P]);break}}}}}}W.each=i;return W}function f(F,D){var E=F&&e(F,"class");return E&&(E=E.replace(/[\r\t\n]/g,p))&&(p+E+p).indexOf(p+D+p)>-1}function e(F,E){var D=F&&F.getAttributeNode(E);if(D&&D.specified){return D.nodeValue}return undefined}function d(D,E){return E==="*"||D.nodeName.toLowerCase()===E.toLowerCase()}g.mix(b,{_compareNodeOrder:function(E,D){if(!E.compareDocumentPosition||!D.compareDocumentPosition){return E.compareDocumentPosition?-1:1}var F=E.compareDocumentPosition(D)&4;return F?-1:1},_getElementsByTagName:function(D,E){return n(E.querySelectorAll(D))},_getElementById:function(E,D){return D.getElementById(E)},_getSimpleAttr:e,_isTag:d,_hasSingleClass:f,_matchesInternal:function(H,E){var F=[],G=0,I,D=E.length;for(;G<D;G++){I=E[G];if(a.call(I,H)){F.push(I)}}return F},_selectInternal:function(E,D){return n(D.querySelectorAll(E))},query:h,get:function(D,E){return h(D,E)[0]||null},unique:function(){var F,E=true;[0,0].sort(function(){E=false;return 0});function D(H,G){if(H===G){F=true;return 0}return b._compareNodeOrder(H,G)}return function(I){F=E;I.sort(D);if(F){var H=1,G=I.length;while(H<G){if(I[H]===I[H-1]){I.splice(H,1);--G}else{H++}}}return I}}(),filter:function(H,F,G){var D=h(H,G),E,L,I,K,J=[];if(typeof F==="string"&&(F=x(F))&&(I=u.exec(F))){E=I[1];L=I[2];K=I[3];if(!E){F=function(O){var M=true,N=true;if(L){M=d(O,L)}if(K){N=f(O,K)}return N&&M}}else{if(E&&!L&&!K){F=function(M){return e(M,"id")===E}}}}if(typeof F==="function"){J=g.filter(D,F)}else{J=b._matchesInternal(F,D)}return J},test:function(D,F,E){var G=h(D,E);return G.length&&b.filter(G,F,E).length===G.length}});return b});KISSY.add("dom/base/traversal",["./api"],function(d,b){var f=b("./api");var a=f.NodeType,h=16;d.mix(f,{_contains:function(j,i){return !!(j.compareDocumentPosition(i)&h)},closest:function(i,l,k,j){return g(i,l,"parentNode",function(m){return m.nodeType!==a.DOCUMENT_FRAGMENT_NODE},k,true,j)},parent:function(i,k,j){return g(i,k,"parentNode",function(l){return l.nodeType!==a.DOCUMENT_FRAGMENT_NODE},j,undefined)},first:function(i,k,j){var l=f.get(i);return g(l&&l.firstChild,k,"nextSibling",undefined,undefined,true,j)},last:function(i,k,j){var l=f.get(i);return g(l&&l.lastChild,k,"previousSibling",undefined,undefined,true,j)},next:function(i,k,j){return g(i,k,"nextSibling",undefined,undefined,undefined,j)},prev:function(i,k,j){return g(i,k,"previousSibling",undefined,undefined,undefined,j)},siblings:function(i,k,j){return c(i,k,true,j)},children:function(i,j){return c(i,j,undefined)},contents:function(i,j){return c(i,j,undefined,1)},contains:function(i,j){i=f.get(i);j=f.get(j);if(i&&j){return f._contains(i,j)}return false},index:function(i,j){var k=f.query(i),r,q=0,o,m,l=k[0];if(!j){o=l&&l.parentNode;if(!o){return -1}r=l;while(r=r.previousSibling){if(r.nodeType===a.ELEMENT_NODE){q++}}return q}m=f.query(j);if(typeof j==="string"){return d.indexOf(l,m)}return d.indexOf(m[0],k)},equals:function(l,k){l=f.query(l);k=f.query(k);if(l.length!==k.length){return false}for(var j=l.length;j>=0;j--){if(l[j]!==k[j]){return false}}return true}});function g(k,i,q,m,j,r,o){if(!(k=f.get(k))){return null}if(i===0){return k}if(!r){k=k[q]}if(!k){return null}j=j&&f.get(j)||null;if(i===undefined){i=1}var p=[],n=d.isArray(i),s,l;if(typeof i==="number"){s=0;l=i;i=function(){return ++s===l}}while(k&&k!==j){if((k.nodeType===a.ELEMENT_NODE||k.nodeType===a.TEXT_NODE&&o)&&e(k,i)&&(!m||m(k))){p.push(k);if(!n){break}}k=k[q]}return n?p:p[0]||null}function e(n,m){if(!m){return true}if(d.isArray(m)){var k,j=m.length;if(!j){return true}for(k=0;k<j;k++){if(f.test(n,m[k])){return true}}}else{if(f.test(n,m)){return true}}return false}function c(n,j,s,l){var r=[],o,p,k,m=f.get(n),q=m;if(m&&s){q=m.parentNode}if(q){o=d.makeArray(q.childNodes);for(p=0;p<o.length;p++){k=o[p];if(!l&&k.nodeType!==a.ELEMENT_NODE){continue}if(k===m){continue}r.push(k)}if(j){r=f.filter(r,j)}}return r}return f});KISSY.add("dom/base",["./base/api","./base/attr","./base/class","./base/create","./base/data","./base/insertion","./base/offset","./base/style","./base/selector","./base/traversal"],function(b,a){var c=a("./base/api");a("./base/attr");a("./base/class");a("./base/create");a("./base/data");a("./base/insertion");a("./base/offset");a("./base/style");a("./base/selector");a("./base/traversal");b.mix(b,{DOM:c,get:c.get,query:c.query});return c});
